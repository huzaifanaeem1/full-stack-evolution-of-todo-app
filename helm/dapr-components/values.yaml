# T058: Dapr Components Helm Chart values with Pub/Sub configuration
# Phase V - Part C: Production Cloud Deployment

global:
  namespace: todo-app

# Dapr Pub/Sub component configuration
pubsub:
  enabled: true
  name: pubsub-kafka
  type: pubsub.kafka
  version: v1

  # Kafka broker configuration
  kafka:
    brokers: "kafka:9092"
    authRequired: false
    # Optional: SASL authentication
    # saslUsername: ""
    # saslPassword: ""
    # saslMechanism: "PLAIN"

  # Topic configuration
  topics:
    taskEvents: "task-events"
    reminders: "reminders"

  # Consumer group configuration
  consumerGroup: "todo-app-consumers"

  # Metadata configuration
  metadata:
    # Kafka client ID
    clientID: "dapr-pubsub-kafka"
    # Consumer fetch default (bytes)
    consumerFetchDefault: "1048576"  # 1MB
    # Max message bytes
    maxMessageBytes: "1048576"  # 1MB
    # Version
    version: "2.8.0"

# Dapr State Store component configuration
statestore:
  enabled: false  # Optional - enable if needed for state management
  name: statestore-redis
  type: state.redis
  version: v1

  # Redis configuration
  redis:
    host: "redis:6379"
    password: ""
    enableTLS: false

  # Metadata configuration
  metadata:
    # Key prefix for state keys
    keyPrefix: "todo-app"
    # Actor state store (true/false)
    actorStateStore: "false"

# Dapr Configuration
dapr:
  # Dapr sidecar configuration
  sidecar:
    logLevel: "info"
    appProtocol: "http"

  # Tracing configuration
  tracing:
    enabled: false
    samplingRate: "1"
    zipkin:
      endpointAddress: "http://zipkin:9411/api/v2/spans"

# Scopes - which apps can access these components
scopes:
  pubsub:
    - backend
    - recurring-task-service
    - notification-service
  statestore:
    - backend
    - recurring-task-service

# Labels for all Dapr components
labels:
  environment: "production"
  managed-by: "helm"
